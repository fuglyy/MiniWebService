# Mini Web Service Movie Catalog 

## Описание проекта

В рамках работы реализована небольшая веб-служба на платформе ASP.NET Core.
Служба хранит данные в памяти процесса и демонстрирует прохождение HTTP-запроса через конвейер обработки (middleware pipeline).

Основная цель работы — показать, как запрос проходит путь:

```
HTTP → Middleware → Controller → Repository → Response
```

и как каждый шаг выполняет одну изолированную задачу.

Предметная область: каталог фильмов.

---


# Запуск проекта

## Шаги запуска

```bash
dotnet run
```

После запуска сервис будет доступен по адресу:

```
http://localhost:5136
```

Swagger:

```
http://localhost:5136/swagger
```

---

# Реализованные точки доступа

## 1. Получить список фильмов

```
GET /api/movies
```

Поддерживаются параметры:

* `minRating` — фильтрация по минимальному рейтингу
* `sortBy` — сортировка (name, rating, genre)
* `desc` — сортировка по убыванию (true/false)

Пример:

```bash
curl "http://localhost:5136/api/movies?sortBy=rating&desc=true"
```

---

## 2. Получить фильм по идентификатору

```
GET /api/movies/{id}
```

Если элемент не найден, возвращается согласованный ответ об ошибке.

---

## 3. Создать новый фильм

```
POST /api/movies
```

Пример:

```bash
curl -X POST http://localhost:5136/api/movies \
-H "Content-Type: application/json" \
-d '{
  "name": "Dune",
  "genre": "Sci-Fi",
  "rating": 9
}'
```

---

# Правила предметной области (валидация)

Реализованы следующие правила:

1. Имя фильма не может быть пустым.
2. Рейтинг не может быть отрицательным или больше 10.
3. Жанр не может быть пустым.

При нарушении правил возвращается единый формат ошибки.

---

# Формат ошибки

Все ошибки возвращаются в едином формате:

```json
{
  "Code": "error_code",
  "Message": "Описание ошибки",
  "RequestId": "уникальный_идентификатор"
}
```

RequestId позволяет сопоставить ответ с записью в журнале.

---

# Проверка сценариев

Минимальный сценарий проверки:

1. Создать новый фильм (POST).
2. Получить список (GET).
3. Получить созданный элемент по id.
4. Выполнить запрос с несуществующим id и убедиться, что возвращается согласованный формат ошибки.
5. Проверить, что в журнале присутствуют RequestId и время выполнения.

Все сценарии воспроизводимы через curl или Swagger.

---

# Риски и эксплуатационные аспекты

* Данные хранятся в памяти и теряются при перезапуске.
* Отсутствует аутентификация (для учебных целей).
* Нет защиты от большого объёма входных данных (может быть добавлено).

---


# Итог

Проект демонстрирует:

* построение конвейера обработки запросов
* разделение ответственности
* согласованную обработку ошибок
* фильтрацию и сортировку
* измерение производительности

Сервис запускается и воспроизводим за несколько минут.

